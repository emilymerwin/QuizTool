<!DOCTYPE html>
<html>
<head>
<title>Can you guess whatâ€™s wrong?</title>
<base target="_parent"/>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
<link rel="stylesheet" href="http://alt.coxnewsweb.com/ajc/_newsapps/libraries/css/ajc/myajc.css" type="text/css"/>
<link rel=stylesheet href="assets/quizstyle2.css" type="text/css"/>
<link rel=stylesheet href="assets/quizstyle_testing.css" type="text/css"/>
<style type="text/css">
#finalResults, #resultsBox{
	display:none;
}
</style>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript">
var url = window.location.toString(), query_string = url.split("?");

$(window).load(function(){  
	$.get('forms_js/'+query_string[1]+'.js', function(){
		var count = 0, tooFar = 0, slideWidth = $('#quizHolder').width(), myContent = document.getElementById('questions'), numQs = qArray.length, ansKeyArr = ["A", "B", "C", "D"];;
		myContent.innerHTML = "";
		$("#slider").width((numQs+1)*slideWidth); //add 1 to leave room for results slide

		for (var q=0; q<numQs; q++){
			var tempQ = qArray[q];
			myContent.innerHTML+= '<div class="q"><div class="questions" id="question'+q+'"><span class="cmSource">Question '+(q+1)+'/'+numQs+':</span><p> '+tempQ.question+'</p></div><div id="answer'+q+'"></div></div>'; 
			var myAnswerHolder = document.getElementById('answer'+q);
			myAnswerHolder.innerHTML = "";

			for (var i=0;i<tempQ.answerArr.length;i++){
					myAnswerHolder.innerHTML += '<div class="answers quiz_btn" id="'+q+'_'+ansKeyArr[i]+'" >'+tempQ.answerArr[i]+'</div>';
			}
		}
		if(slideWidth <= 599){
			$(".q").css("width", slideWidth);
		}

		$('.answers').click(function(event){
			var target = event.target || event.srcElement;
			$('#'+target.id).css({'background-color':'#ccc'});
			check2(target, event);
		});
		function check2(target, event){
			var id = target.id, tempArr = id.split("_"), selectedAns = tempArr[1], myObj = qArray[parseInt(tempArr[0])];//which object do we need to look at?
			var responseTxt, borderColor;
			if(tempArr[0]=== "0"){
				responseTxt = 'According to the state, both answers "C" and "D" are needed to make the sentence correct. This';
			}
			if(myObj.correct === selectedAns){
				count++;
				borderColor = '#FFBA33';
				if(tempArr[0] !== "0"){
					responseTxt = 'You got it right, but this answer';
				}
			} else{
				borderColor = '#f00';
				if(tempArr[0] !== "0"){
					responseTxt = 'The correct answer should have been "'+myObj.correct+'", though it';
				}
			}
			$('#response').empty().append('<p><strong>'+responseTxt+' wasn\'t an option on the actual test.</strong></p><p>'+myObj.explanation+'</p><p class="cmSource">'+myObj.sourced+'</p>').css({'border-color':borderColor});
			$('#resultsBox').show();
			goNext();
		}//check2

		function goNext() {
			tooFar = $('#slider').position();
			if(tooFar.left > -((numQs-1)*slideWidth)) {
				$('#next').click(function(){
					$('#resultsBox').hide();
					$('#slider').animate({left: tooFar.left-slideWidth});
				});
			} else {
				countFinal();
			};
		}//goNext

		//count final score and give final results
		function countFinal(){
			$('#finalResults').show();
			$('#finalResults').append('<div id="yourScore">Your score: '+count+'/'+numQs+'</div><div id="scoreResponse"><p>Georgia education officials demanded that the first three questions be removed from high school End-of-Course Tests. In a separate incident, officials first ordered a different contractor to drop the fourth question, but then agreed to allow it to be counted in scores. More problems later surfaced with that test and it was eventually invalidated.</p></div>');
		};//countFinal
	});//get
});//window.load
</script>
</head>
<body>
<div class="flatpages">
	<div id="quizHolder">
		<div id="slider">
			<div id="questions"></div>
			<div class="q" id="finalResults"></div>
		</div>
		<div id="resultsBox">
			<div id="response"></div>
			<div id="next" class="quiz_btn">next</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-28102445-5', 'myajc.com');
	  ga('send', 'pageview');
</script>
<script type="text/javascript" src="flatpage_stubs.js"></script>
<script>
// Have to add flatpage_stubs.js above this script
var i = 0;
document.body.onclick = function(e){
							i += 1;
							// Track in metrics
							cmg.s_coxnews.utilities.track_event(42, null, ["eVar40", "interactive_photoquiz"], ["prop42", "eVar42", "ajc"], "Interaction in photo quizes");
							if(i === 3){
								i = 0;
								// Refresh ads
								Adgeletti.refresh();
							}
						}
</script>
</body>
</html>