<!DOCTYPE html>
<html>
<head>
	<title>Quiz</title>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >

<LINK REL=StyleSheet HREF="assets/quizstyle2.css" TYPE="text/css">
	<link rel="stylesheet" href="http://host.coxmediagroup.com/ajc/digitalprojects/global/css/iFrame_Medley.css" type="text/css"/>
<style type="text/css">
.storylink{
	color: #004488;
}
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript" src="assets/jquery.touchSwipe.js"></script>
<script type="text/javascript">

var url = window.location.toString();
var query_string = url.split("?");

$(window).load(function(){  
	$.get('forms_js/'+query_string[1]+'.js', function(){
		var count = 0;
		var tooFar = 0;
		var qWidth;
		$('#resultsBox').hide();
		document.getElementById('quizTitle').innerHTML = quizTitle;
		var myContent = document.getElementById('questions');
		myContent.innerHTML = ""
			for (var q=0; q<qArray.length; q++){
				var tempQ = qArray[q];
				myContent.innerHTML+= '<div class="q"><div class="questions" id="question'+q+'"><span class="cmSource" style="font-size:12px">Question '+(q+1)+'/'+qArray.length+':</span><p> '+tempQ.question+'</p></div><div id="answer'+q+'" class="answerHolder"></div><div id="img'+q+'" class="images"></div></div>'; 
				//var myAnswerArr = 'answerArr'+q;
				//var myImg = 'img'+q;
				var myAnswerHolder = document.getElementById('answer'+q);
				myAnswerHolder.innerHTML = "";
				
				for (var i=0;i<tempQ.answerArr.length;i++){
					var ansKey = "";
					if(tempQ.answerArr[i] != ""){
						if(i == 0){
							ansKey = "A";
						}
						else if(i == 1){
							ansKey = "B";
						}
						else if(i == 2){
							ansKey = "C"
						}
						else if (i == 3){
							ansKey = "D";
						}
						myAnswerHolder.innerHTML += '<a href="#"><div class="answers" id="'+q+'_'+ansKey+'" >'+tempQ.answerArr[i]+'</div></a>';
					}
					if(tempQ.img != ""){document.getElementById('img'+q).innerHTML = '<img src="'+tempQ.img+'"/>'};
					if(tempQ.pcred != ""){document.getElementById('img'+q).innerHTML+= '<p class="cmSource">'+tempQ.pcred+'</p>'}
				}
			//	if(('img'+q) != ''){document.getElementById(('img'+q)).innerHTML = '<img src="img'+q+'"/>';}
			}
			qWidth = $(".q").width();
			$('.answers').click(function(event){
			var target = event.target || event.srcElement;
				$('#'+target.id).css({'background-color':'#ccc'});				
				check2(target, event);
			//	check1(c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,event);
			});
		/*	$('#resultsBox').click(function(event){
				$('#response').hide();
			})*/
			function check2(target, event){
				var target = event.target || event.srcElement;
				var id = target.id;

				var tempArr = id.split("_");
				var myObj = qArray[parseInt(tempArr[0])];//which object do we need to look at?
				var selectedAns = tempArr[1]//which answer was selected
				if(myObj.correct == selectedAns){
					count++;
					showCorrect();
					$('#response').empty().append('<div class="correctAnswer">The answer "'+$('#'+id).text()+'" is correct!</div><br><p>'+myObj.explanation+'</p>');
					if(myObj.URL != ""){
						$('#response').append('<p><a class="storylink" href="'+myObj.URL+'" target="_blank">Read the story</a></p>');
					}
				}
				else{
					showWrong();
					$('#response').empty().append('<div class="correctAnswer">Correct answer: "'+$(('#'+tempArr[0]+"_"+myObj.correct)).text()+'"</div><br><p>'+myObj.explanation+'</p>');//come back to this
					if(myObj.URL != ""){
						$('#response').append('<p><a class="storylink" href="'+myObj.URL+'" target="_blank">Read the story</a></p>');
					}
				}
				
				
			}
			//start unchecked code//
		/*	function check1(c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,event) {
			var target = event.target || event.srcElement;
			var id = target.id;
			switch(id) {
				case c0 :
				count++;
				showCorrect();
				$('#response').empty().append('<div class="correctAnswer">The answer '+$('#'+id).text()+' is correct!</div><br>'+aR1);
				//$('#readIt').empty().append('<a href="'+link1+'" target="_blank">Read the story</a>');
				break;
				case c1 :
				count++;
				showCorrect();
				$('#response').empty().append('<div class="correctAnswer">The answer '+$('#'+id).text()+' is correct!</div><br>'+aR2);
				//$('#readIt').empty().append('<a href="'+link2+'" target="_blank">Read the story</a>');
				break;
				case c2 :
				count++;
				showCorrect();
				$('#response').empty().append('<div class="correctAnswer">The answer '+$('#'+id).text()+' is correct!</div><br>'+aR3);
				//$('#readIt').empty().append('<a href="'+link3+'" target="_blank">Read the story</a>');
				break;
				case c3 :
				count++;
				showCorrect();
				$('#response').empty().append('<div class="correctAnswer">The answer '+$('#'+id).text()+' is correct!</div><br>'+aR4);
				//$('#readIt').empty().append('<a href="'+link4+'" target="_blank">Read the story</a>');
				break;
				case c4 :
				count++;
				showCorrect();
				$('#response').empty().append('<div class="correctAnswer">The answer '+$('#'+id).text()+' is correct!</div><br>'+aR5);
				//$('#readIt').empty().append('<a href="'+link5+'" target="_blank">Read the story</a>');
				break;
				case c5 :
				count++;
				showCorrect();
				$('#response').empty().append('<div class="correctAnswer">The answer '+$('#'+id).text()+' is correct!</div><br>'+aR6);
				//$('#readIt').empty().append('<a href="'+link5+'" target="_blank">Read the story</a>');
				break;
				case c6 :
				count++;
				showCorrect();
				$('#response').empty().append('<div class="correctAnswer">The answer '+$('#'+id).text()+' is correct!</div><br>'+aR7);
				//$('#readIt').empty().append('<a href="'+link5+'" target="_blank">Read the story</a>');
				break;
				case c7 :
				count++;
				showCorrect();
				$('#response').empty().append('<div class="correctAnswer">The answer '+$('#'+id).text()+' is correct!</div><br>'+aR8);
				//$('#readIt').empty().append('<a href="'+link5+'" target="_blank">Read the story</a>');
				break;
				case c8 :
				count++;
				showCorrect();
				$('#response').empty().append('<div class="correctAnswer">The answer '+$('#'+id).text()+' is correct!</div><br>'+aR9);
				//$('#readIt').empty().append('<a href="'+link5+'" target="_blank">Read the story</a>');
				break;
				case c9 :
				count++;
				showCorrect();
				$('#response').empty().append('<div class="correctAnswer">The answer '+$('#'+id).text()+' is correct!</div><br>'+aR10);
				//$('#readIt').empty().append('<a href="'+link5+'" target="_blank">Read the story</a>');
				break;
				default:
				showWrong();
				var splitAid = id.split("_");
					if (splitAid[0]==='a') {
					$('#response').empty().append('<div class="correctAnswer">Correct answer: '+$('#'+c0).text()+'</div><br>'+aR1);
				//	$('#readIt').empty().append('<a href="'+link1+'" target="_blank">Read the story</a>');
					} if (splitAid[0]==='b') {
					$('#response').empty().append('<div class="correctAnswer">Correct answer: '+$('#'+c1).text()+'</div><br>'+aR2);
				//	$('#readIt').empty().append('<a href="'+link2+'" target="_blank">Read the story</a>');
					} if (splitAid[0]==='c') {
					$('#response').empty().append('<div class="correctAnswer">Correct answer: '+$('#'+c2).text()+'</div>'+'<br>'+aR3);
				//	$('#readIt').empty().append('<a href="'+link3+'" target="_blank">Read the story</a>');
					} if (splitAid[0]==='d') {
					$('#response').empty().append('<div class="correctAnswer">Correct answer: '+$('#'+c3).text()+'</div><br>'+aR4);
				//	$('#readIt').empty().append('<a href="'+link4+'" target="_blank">Read the story</a>');
					} if (splitAid[0]==='e') {
					$('#response').empty().append('<div class="correctAnswer">Correct answer: '+$('#'+c4).text()+'</div><br>'+aR5);
				//	$('#readIt').empty().append('<a href="'+link5+'" target="_blank">Read the story</a>');
					} if (splitAid[0]==='f') {
					$('#response').empty().append('<div class="correctAnswer">Correct answer: '+$('#'+c5).text()+'</div><br>'+aR6);
				//	$('#readIt').empty().append('<a href="'+link5+'" target="_blank">Read the story</a>');
					} if (splitAid[0]==='g') {
					$('#response').empty().append('<div class="correctAnswer">Correct answer: '+$('#'+c6).text()+'</div><br>'+aR7);
				//	$('#readIt').empty().append('<a href="'+link5+'" target="_blank">Read the story</a>');
					} if (splitAid[0]==='h') {
					$('#response').empty().append('<div class="correctAnswer">Correct answer: '+$('#'+c7).text()+'</div><br>'+aR8);
				//	$('#readIt').empty().append('<a href="'+link5+'" target="_blank">Read the story</a>');
					} if (splitAid[0]==='i') {
					$('#response').empty().append('<div class="correctAnswer">Correct answer: '+$('#'+c8).text()+'</div><br>'+aR9);
				//	$('#readIt').empty().append('<a href="'+link5+'" target="_blank">Read the story</a>');
					} if (splitAid[0]==='j') {
					$('#response').empty().append('<div class="correctAnswer">Correct answer: '+$('#'+c9).text()+'</div><br>'+aR10);
				//	$('#readIt').empty().append('<a href="'+link5+'" target="_blank">Read the story</a>');
					}  
				break;
				}
			}*/

			//if correct?
			function showCorrect() {

				goNext(count);
				$('#resultsBox').fadeIn(100);
				$('#response').fadeIn(100).css({'border-color':'#22b652'});
			//	$('#response').delay(500).fadeIn(100).css({'background-color':'#22b652'});
			/*	$('#result').empty().append('CORRECT');*/

			}
			//if incorrect?
			function showWrong() {

				goNext(count);
				$('#resultsBox').fadeIn(100);
				$('#response').fadeIn(100).css({'border-color':' #f00'});
			//	$('#response').delay(500).fadeIn(100).css({'background-color':'#f00'});
			/*	$('#result').empty().delay(3000).append('INCORRECT');*/
			}

			//slide to next question
			function goNext(count) {
				tooFar = $('#slider').position();
				if(tooFar.left != -((qArray.length-1)*600)) {
				$('#next').click(function(){
				$('#resultsBox').hide();
				//$('#slider').css({'left':tooFar.left-600});
				$('#slider').animate({left: tooFar.left-600});
					});
				} else {
					countFinal(count);
				//$('#next').empty().append('See your results');
				//count total correct and turn into percentage
				};
			}

			//count final score and give final results
			function countFinal(count){
				console.log(count);
				var finalCount = Math.round((count/qArray.length)*100);
				if(qArray.length >= 8){
					if (count>=8) {
						$('#scoreResponse').empty().append("Nice job!");
					} else if(count >= 6) {
						$('#scoreResponse').empty().append('So close! You should try again.');
					} else if(count >= 4) {
						$('#scoreResponse').empty().append('Hmm. You could do much better.');
					} else if(count >= 2) {
						$('#scoreResponse').empty().append("Not so hot. Maybe next time?");
					} else if(count == 1) {
						$('#scoreResponse').empty().append("Not so hot. Maybe next time?");
					} else if(count == 0) {
						$('#scoreResponse').empty().append("Do you pay attention at <i>all</i>?");
					}
				}
				else{
					if (count>=5) {
						$('#scoreResponse').empty().append("Nice job!");
					} else if(count >= 4) {
						$('#scoreResponse').empty().append('So close! You should try again.');
					} else if(count >= 3) {
						$('#scoreResponse').empty().append('Hmm. You could do much better.');
					} else if(count >= 2) {
						$('#scoreResponse').empty().append("Not so hot. Maybe next time?");
					} else if(count == 1) {
						$('#scoreResponse').empty().append("Not so hot. Maybe next time?");
					} else if(count == 0) {
						$('#scoreResponse').empty().append("Do you pay attention at <i>all</i>?");
					}
				}
				
				$('#yourScore').empty().append('Your score: '+count+'/'+qArray.length);
				$('#score').empty().append(finalCount+'%');

				$('#tryAgain').click(function(event){
					count=0;
					tooFar = $('#slider').position();
					$("#slider").animate({left:tooFar.left-tooFar.left});
					$('.answers').css({'background-color':'#fff'});
				});
			};
			//end unchecked code
		})
	})
			
		
</script>
</head>
<body>
	<div id="quizTitle"></div>
	<div id="quizBackground"><!--<span style="position:absolute;left:5px;bottom:5px;"><img src="  http://alt.coxnewsweb.com/ajc/_projects_and_planning_group/projects/newsquiz/assets/ajc-logo.png"></span>--></div>
	<div id="quizHolder">
		<div id="resultsBox">
			<!--<div id="result"></div>-->
			<div id="response"></div>
			<!--<div id="readIt"></div>-->
			<a href="#"><div id="next">next</div></a>
		</div>
		<div id="slider">
			<div id="questions"></div>
			<!--<div class="q">
			<div id="loader">
				<div id="introText">Test your knowledge with this quiz!</div>
				<div id="begin">Swipe left to begin</div>
			</div>
			</div>-->
		<!--	<div class="q">
				<div class="questions" id="question1"></div>
				<div id="answer1" class="answerHolder"></div>
				<div id="img1" class="images"></div>
			</div>	
			<div class="q">
				<div class="questions" id="question2"></div>
				<div id="answer2" class="answerHolder"></div>
				<div id="img2" class="images"></div>
			</div>
			<div class="q">
				<div class="questions" id="question3"></div>
				<div id="answer3" class="answerHolder"></div>
				<div id="img3" class="images"></div>
			</div>
			<div class="q">
				<div class="questions" id="question4"></div>
				<div id="answer4" class="answerHolder"></div>
				<div id="img4" class="images"></div>
			</div>
			<div class="q">
				<div class="questions" id="question5"></div>
				<div id="answer5" ></div>
				<div id="img5" class="images"></div>
			</div>
			<div class="q">
				<div class="questions" id="question6"></div>
				<div id="answer6" ></div>
				<div id="img6" class="images"></div>
			</div>
			<div class="q">
				<div class="questions" id="question7"></div>
				<div id="answer7" ></div>
				<div id="img7" class="images"></div>
			</div>
			<div class="q">
				<div class="questions" id="question8"></div>
				<div id="answer8" ></div>
				<div id="img8" class="images"></div>
			</div>
			<div class="q">
				<div class="questions" id="question9"></div>
				<div id="answer9" ></div>
				<div id="img9" class="images"></div>
			</div>
			<div class="q">
				<div class="questions" id="question10"></div>
				<div id="answer10" ></div>
				<div id="img10" class="images"></div>
			</div>-->
			<div class="q" id="finalResults">
				<div id="score"></div>
				<div id="yourScore"></div>
				<div id="scoreResponse"></div>
				<!--<a href="#"><div id="tryAgain">TRY AGAIN?</div></a>-->
			</div>
		</div>	
	</div>
	
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-28102445-3']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
</script>
</body>
</html>